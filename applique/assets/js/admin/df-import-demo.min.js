jQuery(document).ready(function(e){jQuery('.install-button').live('click', function(e){var demo_name=jQuery(this).data('demo-name'); jQuery('.' + demo_name + '.meter span').width('10%'); var confirm=window.confirm("You are one click away to install the " + demo_name.toUpperCase() + " demo in your site.\n\nAre you sure you want to do this?"); if (confirm==true){var data={action: 'df_install_demo', demo_name: demo_name, process: 'install_xml', status : 'success',}; jQuery('.' + demo_name + '.meter span').animate({width: "30%"}, 8500); jQuery('.df-demo-import-loader').show(); jQuery('.meter.' + demo_name).show(); jQuery('.df-words-loading.' + demo_name).show(); jQuery.post(ajaxurl, data, function(response){if (response && response.indexOf('successful')==-1){data['status']='failed'; install_customizer(data);}else{jQuery('.' + demo_name + '.meter span').animate({width: "40%"}, 1500);}}).fail(function(){alert('failed');}).done(function(){install_customizer(data);});}e.preventDefault();}); install_customizer=function(data){data['process']='install_customizer'; jQuery.post(ajaxurl, data, function(response){if (response && response.indexOf('successful')==-1){data['status']='failed'; install_widgets(data);}else{jQuery('.' + data['demo_name'] + '.meter span').animate({width: "70%"}, 1500);}}).fail(function(){alert('failed');}).done(function(){install_widgets(data);});}; install_widgets=function(data){data['process']='install_widgets'; jQuery.post(ajaxurl, data, function(response){if (response && response.indexOf('successful')==-1){data['status']='failed'; jQuery('.' + data['demo_name'] + '.meter span').animate({width: "100%"}, 1500);}else{jQuery('.' + data['demo_name'] + '.meter span').animate({width: "100%"}, 1500);}setTimeout(function(){if (data['status'] !=='success'){jQuery('.df-error').show();}else{jQuery('.df-success').show();}jQuery('.df-demo-import-loader').fadeOut(1600); jQuery('.meter').fadeOut(1600); jQuery('html, body').animate({scrollTop:0}, 1800);}, 3000);}).fail(function(){alert('failed');});};});